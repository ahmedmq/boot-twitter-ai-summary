package com.ahmedmq.boot.twitter.ai.summary.client.twitter;import com.ahmedmq.boot.twitter.ai.summary.client.WiremockInitializer;import com.ahmedmq.boot.twitter.ai.summary.client.twitter.model.userlookup.UserLookup;import com.github.tomakehurst.wiremock.WireMockServer;import com.github.tomakehurst.wiremock.client.WireMock;import org.junit.jupiter.api.Test;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.http.MediaType;import org.springframework.test.context.ActiveProfiles;import org.springframework.test.context.ContextConfiguration;import static com.github.tomakehurst.wiremock.client.WireMock.equalTo;import static com.github.tomakehurst.wiremock.client.WireMock.get;import static org.assertj.core.api.Assertions.assertThat;@SpringBootTest@ContextConfiguration(initializers = WiremockInitializer.class)@ActiveProfiles("test")class TwitterClientTest {    @Autowired    TwitterClient twitterClient;    @Autowired    WireMockServer twitterMockServer;    @Test    void shouldReturnUserByUsername() {        twitterMockServer.stubFor(get("/users/by/username/elonmusk")                .withHeader("Authorization", equalTo("Bearer AAAAAAAAAAAAAAAAAAAAAEgkiwEAAAAAam%2Bb49N5bkbiQIx6Nzr6tvOR5kk%3DRQngUp3Lu11HZttp1TkGbBuvTa4F66HuqgkZgfYTmGi299gxDY"))                .willReturn(                        WireMock.aResponse()                                .withStatus(200)                                .withHeader("Content-Type", MediaType.APPLICATION_JSON_VALUE)                                .withBody("""                                        {                                            "data": {                                                "id": "2244994945",                                                "name": "Elon Musk",                                                "username": "elonmusk"                                            }                                        }                                        """)                ));        UserLookup user = twitterClient.getUserByUsername("elonmusk");        assertThat(user.data()).isNotNull();        assertThat(user.data().id()).isEqualTo("2244994945");        assertThat(user.data().name()).isEqualTo("Elon Musk");        assertThat(user.data().username()).isEqualTo("elonmusk");    }}